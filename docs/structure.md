# ساختار پروژه سامانه استخدام نیروی انسانی مجتمع کامپیوتر یک دو سه

این مستند، ساختار فایل‌ها و پوشه‌های پروژه و کارکرد هر بخش را توضیح می‌دهد.

## ساختار کلی پروژه

پروژه بر اساس معماری MVC (Model-View-Controller) طراحی شده است و از مفاهیم شی‌گرایی (OOP) استفاده می‌کند.

```
cv123.ir/
├── app/                    # هسته اصلی برنامه (MVC)
│   ├── controllers/        # کنترلرها
│   ├── models/             # مدل‌ها
│   ├── views/              # نماها
│   │   ├── admin/          # نماهای بخش مدیریت
│   │   ├── components/     # اجزای مشترک نماها
│   │   ├── layouts/        # قالب‌های کلی
│   │   └── user/           # نماهای بخش کاربر
│   ├── helpers/            # کلاس‌های کمکی
│   └── middleware/         # میان‌افزارها
├── config/                 # تنظیمات پروژه
├── database/               # اسکریپت‌های پایگاه داده
├── docs/                   # مستندات پروژه
├── logs/                   # لاگ‌های سیستم
├── public/                 # فایل‌های عمومی قابل دسترس
│   ├── css/                # استایل‌ها
│   ├── js/                 # اسکریپت‌ها
│   ├── images/             # تصاویر
│   ├── fonts/              # فونت‌ها
│   └── assets/             # سایر فایل‌های استاتیک
├── index.php               # نقطه ورود برنامه
├── manifest.json           # فایل منیفست PWA
├── service-worker.js       # سرویس ورکر PWA
└── offline.html            # صفحه آفلاین PWA
```

## شرح اجزای اصلی

### فایل‌های ریشه

- **index.php**: نقطه ورود اصلی برنامه که درخواست‌های HTTP را مدیریت می‌کند
- **manifest.json**: تنظیمات Progressive Web App (PWA)
- **service-worker.js**: سرویس ورکر برای کش کردن فایل‌ها و قابلیت آفلاین
- **offline.html**: صفحه نمایش داده شده در حالت آفلاین

### پوشه app

این پوشه شامل هسته اصلی برنامه است و بر اساس معماری MVC سازماندهی شده است:

#### app/controllers

کنترلرها مسئول دریافت درخواست‌ها از کاربر، پردازش آن‌ها و فراخوانی مدل‌ها و نماها هستند:

- **HomeController.php**: کنترلر صفحه اصلی
- **AuthController.php**: کنترلر احراز هویت (ورود، ثبت‌نام، خروج)
- **AdminController.php**: کنترلر بخش مدیریت
- **ChatController.php**: کنترلر چت هوش مصنوعی
- **SettingsController.php**: کنترلر مدیریت تنظیمات و تست API‌ها

#### app/models

مدل‌ها مسئول تعامل با پایگاه داده و اعمال منطق تجاری هستند:

- **User.php**: مدل کاربر
- **Profile.php**: مدل پروفایل
- **Job.php**: مدل موقعیت شغلی
- **Application.php**: مدل درخواست استخدام
- **Skill.php**: مدل مهارت

#### app/views

نماها مسئول نمایش اطلاعات به کاربر هستند:

- **views/admin/**: نماهای بخش مدیریت
- **views/user/**: نماهای بخش کاربر
- **views/components/**: اجزای مشترک مانند header و footer
- **views/layouts/**: قالب‌های کلی سایت

#### app/views/admin

صفحات پنل مدیریت:

- **dashboard.php**: داشبورد اصلی مدیریت
- **settings.php**: صفحه تنظیمات سیستم
- **logs.php**: صفحه مدیریت لاگ‌های سیستم
- **users.php**: صفحه مدیریت کاربران

#### app/helpers

کلاس‌های کمکی که عملکردهای مشترک را فراهم می‌کنند:

- **Database.php**: کلاس ارتباط با پایگاه داده
- **Autoloader.php**: کلاس بارگذاری خودکار کلاس‌ها
- **Validator.php**: کلاس اعتبارسنجی داده‌ها
- **Auth.php**: کلاس مدیریت احراز هویت
- **OpenAIService.php**: کلاس رابط برای اتصال به سرویس هوش مصنوعی OpenAI
- **SmsService.php**: کلاس رابط برای اتصال به سرویس‌های پیامک

#### app/middleware

میان‌افزارها برای پردازش درخواست‌ها قبل از رسیدن به کنترلرها:

- **AuthMiddleware.php**: بررسی احراز هویت کاربر
- **AdminMiddleware.php**: بررسی دسترسی مدیر

### پوشه config

تنظیمات پروژه:

- **config.php**: تنظیمات اصلی پروژه مانند اطلاعات دیتابیس و مسیرها

### پوشه database

اسکریپت‌های مربوط به پایگاه داده:

- **database.sql**: اسکریپت ایجاد جداول پایگاه داده
- **setup.php**: اسکریپت راه‌اندازی اولیه پایگاه داده

### پوشه public

فایل‌های عمومی قابل دسترس از طریق مرورگر:

- **css/**: فایل‌های استایل CSS
- **js/**: فایل‌های جاوااسکریپت
  - **main.js**: اسکریپت‌های اصلی سایت
  - **admin/**: اسکریپت‌های بخش مدیریت
    - **settings.js**: اسکریپت صفحه تنظیمات مدیریت
- **images/**: تصاویر
- **fonts/**: فونت‌ها (از جمله فونت وزیرمتن)

## نحوه مسیریابی (Routing)

مسیریابی در این پروژه توسط کلاس `Router` در فایل `app/Router.php` انجام می‌شود. این کلاس درخواست‌های HTTP را به کنترلرها و اکشن‌های مناسب هدایت می‌کند.

مثال تعریف مسیر:
```php
$router->get('/', 'HomeController@index');
$router->post('/login', 'AuthController@login');
```

## نحوه ارتباط با پایگاه داده

ارتباط با پایگاه داده از طریق کلاس `Database` در فایل `app/helpers/Database.php` انجام می‌شود. این کلاس یک رابط PDO را برای تعامل با پایگاه داده MySQL فراهم می‌کند.

مثال استفاده:
```php
$db = Database::getInstance();
$users = $db->query("SELECT * FROM users WHERE status = ?", ['active'])->fetchAll();
```
